{"ast":null,"code":"import _slicedToArray from\"C:/Users/Dell/Desktop/2021/ReactJS/wordup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Signup(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password2=_useState8[0],setPassword2=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),errors=_useState12[0],setErrors=_useState12[1];useEffect(function(){if(localStorage.getItem('token')!==null){window.location.replace('http://localhost:/3000/dashboard');}else{setLoading(false);}},[]);var onSubmit=function onSubmit(e){if(password===password2){var user={username:username,email:email,password:password};/*          var url = 'http://127.0.0.1:8000/accounts/api/auth/register'\r\n            var url = 'http://127.0.0.1:8000/api/auth/register'\r\n */var url='https://ascentrick.pythonanywhere.com/api/auth/register';fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data){localStorage.clear();localStorage.setItem('token',data.token);localStorage.setItem('username',data.user.username);window.location.replace('http://localhost:/3000');}else{setUsername('');setEmail('');setPassword('');setPassword2('');localStorage.clear();setErrors(true);console.log(errors);}});}else{alert(\"passwords dont't match\");}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"ui middle aligned center aligned grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"four wide column\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"ui teal image header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:\"Create New Account\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"ui large form\",onSubmit:onSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui segment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui left icon input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"user icon\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",type:\"text\",placeholder:\"Username\",value:username,required:true,onChange:function onChange(e){return setUsername(e.target.value);}}),' ']})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui left icon input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"mail icon\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"text\",placeholder:\"Email\",value:email,required:true,onChange:function onChange(e){return setEmail(e.target.value);}}),' ']})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui left icon input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"lock icon\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Password\",value:password,required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),' ']})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui left icon input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"lock icon\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Confirm Password\",value:password2,required:true,onChange:function onChange(e){return setPassword2(e.target.value);}}),' ']})}),/*#__PURE__*/_jsx(\"button\",{className:\"ui fluid large teal submit button\",type:\"submit\",children:\"Create Account\"})]})})]})})});}export default Signup;","map":{"version":3,"sources":["C:/Users/Dell/Desktop/2021/ReactJS/wordup/src/components/auth/Signup.js"],"names":["React","useState","useEffect","Signup","username","setUsername","email","setEmail","password","setPassword","password2","setPassword2","loading","setLoading","errors","setErrors","localStorage","getItem","window","location","replace","onSubmit","e","user","url","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","clear","setItem","token","alert","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction Signup() {\r\n    const [username, setUsername] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [password2, setPassword2] = useState('');\r\n    const [loading, setLoading ] = useState(true);\r\n    const [errors, setErrors] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('token') !== null ) {\r\n            window.location.replace('http://localhost:/3000/dashboard')\r\n        } else {\r\n            setLoading(false)    \r\n        }\r\n    }, [])\r\n\r\n    const onSubmit = e => {\r\n        if (password === password2 ) {            \r\n            const user = {\r\n                username : username,\r\n                email : email,\r\n                password : password\r\n            }\r\n/*          var url = 'http://127.0.0.1:8000/accounts/api/auth/register'\r\n            var url = 'http://127.0.0.1:8000/api/auth/register'\r\n */            \r\n            var url = 'https://ascentrick.pythonanywhere.com/api/auth/register'\r\n            fetch(url , {\r\n                method : 'POST' ,\r\n                headers : {\r\n                  'Content-Type': 'application/json'\r\n                },\r\n                body : JSON.stringify(user)\r\n            })\r\n            .then(res => res.json() )\r\n            .then(data => {\r\n                console.log(data)\r\n                if(data){\r\n                    localStorage.clear();\r\n                    localStorage.setItem('token', data.token)\r\n                    localStorage.setItem('username', data.user.username)\r\n                    window.location.replace('http://localhost:/3000')\r\n                } else {\r\n                    setUsername('');\r\n                    setEmail('');\r\n                    setPassword('');\r\n                    setPassword2('');\r\n                    localStorage.clear();\r\n                    setErrors(true);\r\n                    console.log(errors)                   \r\n                }\r\n            })\r\n\r\n        } else {\r\n            alert (`passwords dont't match`)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n          <div className=\"ui middle aligned center aligned grid\">\r\n            <div className=\"four wide column\">\r\n              <h2 className=\"ui teal image header\">\r\n                <div className=\"content\">\r\n                  Create New Account\r\n                </div>\r\n              </h2>\r\n              <form className=\"ui large form\" onSubmit={onSubmit}>\r\n                <div className=\"ui segment\">\r\n                  <div className=\"field\">\r\n                    <div className=\"ui left icon input\">\r\n                      <i className=\"user icon\"></i>    \r\n                      <input name='username' type='text'  placeholder=\"Username\"\r\n                        value={username} required onChange={e => setUsername(e.target.value)} />\r\n                        {' '}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"field\">\r\n                    <div className=\"ui left icon input\">\r\n                      <i className=\"mail icon\"></i>\r\n    \r\n                      <input name='email' type='text' placeholder=\"Email\"\r\n                        value={email} required onChange={e => setEmail(e.target.value)} />\r\n                        {' '}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"field\">\r\n                    <div className=\"ui left icon input\">\r\n                      <i className=\"lock icon\"></i>\r\n                      <input name='password' type='password'  placeholder=\"Password\"\r\n                        value={password} required onChange={e => setPassword(e.target.value)} />\r\n                        {' '}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"field\">\r\n                    <div className=\"ui left icon input\">\r\n                      <i className=\"lock icon\"></i>\r\n                      <input name='password' type='password'  placeholder=\"Confirm Password\"\r\n                        value={password2} required onChange={e => setPassword2(e.target.value)} />\r\n                        {' '}\r\n                    </div>\r\n                  </div>\r\n                  <button className=\"ui fluid large teal submit button\" type=\"submit\">Create Account</button>\r\n              </div>   \r\n            </form>\r\n\r\n            </div>\r\n          </div>\r\n      </>\r\n    )\r\n}\r\n\r\nexport default Signup\r\n"]},"metadata":{},"sourceType":"module"}