{"ast":null,"code":"import _slicedToArray from\"C:/Users/Dell/Desktop/2021/ReactJS/wordup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAlert}from'react-alert';import'../../styles/style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var alert=useAlert();useEffect(function(){if(localStorage.getItem('token')!==null){window.location.replace('http://localhost:3000/dashboard');}else{setLoading(false);}},[]);var onSubmit=function onSubmit(e){e.preventDefault();var user={username:username,password:password};/*\r\n    var url = 'http://127.0.0.1:8000/api/auth/login'   \r\n    var url = 'http://127.0.0.1:8000/accounts/api/auth/login' \r\n*/var url='https://ascentrick.pythonanywhere.com/api/auth/login';fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)}).then(function(data){return data.json();}).then(function(data){if(data){localStorage.clear();localStorage.setItem('token',data.token);localStorage.setItem('username',data.user.username);//        console.log('login fetched userdata', data.user)\nwindow.location.replace('http://localhost:3000/');}else{setUsername('');setPassword('');localStorage.clear();setErrors(true);}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading===false,loading===false&&/*#__PURE__*/_jsx(\"div\",{className:\"ui middle aligned center aligned grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"four wide column\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"ui teal image header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:\"Log-in to your account\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"ui large form\",onSubmit:onSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui segment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui left icon input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"user icon\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",type:\"text\",value:username,required:true,onChange:function onChange(e){return setUsername(e.target.value);}}),' ']})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui left icon input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"lock icon\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",value:password,required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),' ']})}),/*#__PURE__*/_jsx(\"button\",{className:\"ui fluid large teal submit button\",type:\"submit\",children:\"Login\"})]})}),errors===true&&/*#__PURE__*/_jsx(\"div\",{className:\"ui message error\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Incorrect Credentials\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ui message\",children:[\"New to us? \",/*#__PURE__*/_jsx(Link,{to:\"/Signup\",children:\" Register  \"})]})]})})]});};export default Login;","map":{"version":3,"sources":["C:/Users/Dell/Desktop/2021/ReactJS/wordup/src/components/auth/Login.js"],"names":["React","useState","useEffect","Link","useAlert","Login","username","setUsername","password","setPassword","errors","setErrors","loading","setLoading","alert","localStorage","getItem","window","location","replace","onSubmit","e","preventDefault","user","url","fetch","method","headers","body","JSON","stringify","then","data","json","clear","setItem","token","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAlert } from 'react-alert';\r\nimport  '../../styles/style.css';\r\n\r\n\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errors, setErrors] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const alert = useAlert()     \r\n   \r\n  useEffect(() => {\r\n    if (localStorage.getItem('token') !== null) {\r\n      window.location.replace('http://localhost:3000/dashboard');\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const onSubmit = e =>{\r\n    e.preventDefault();\r\n\r\n    const user = {\r\n      username : username,\r\n      password : password\r\n    }\r\n/*\r\n    var url = 'http://127.0.0.1:8000/api/auth/login'   \r\n    var url = 'http://127.0.0.1:8000/accounts/api/auth/login' \r\n*/\r\n    var url = 'https://ascentrick.pythonanywhere.com/api/auth/login'\r\n    fetch( url , {\r\n      method : 'POST',\r\n      headers : { 'Content-Type': 'application/json' } ,\r\n      body : JSON.stringify(user)\r\n    })\r\n    .then(data => data.json())\r\n    .then(data => { \r\n      if(data){\r\n        localStorage.clear()\r\n        localStorage.setItem('token', data.token)\r\n        localStorage.setItem('username', data.user.username)\r\n//        console.log('login fetched userdata', data.user)\r\n        window.location.replace('http://localhost:3000/')\r\n      } else {\r\n        setUsername('')\r\n        setPassword('')\r\n        localStorage.clear()\r\n        setErrors(true)\r\n      }\r\n    })\r\n  }\r\n  return ( \r\n    <>\r\n    {loading === false }\r\n    {loading === false && (\r\n      <div className=\"ui middle aligned center aligned grid\">\r\n        <div className=\"four wide column\">\r\n          <h2 className=\"ui teal image header\">\r\n            <div className=\"content\">\r\n              Log-in to your account\r\n            </div>\r\n          </h2>\r\n          <form className=\"ui large form\" onSubmit={onSubmit}>\r\n          <div className=\"ui segment\">\r\n            <div className=\"field\">\r\n              <div className=\"ui left icon input\">\r\n                <i className=\"user icon\"></i>\r\n\r\n                <input name='username' type='text'\r\n                  value={username} required onChange={e => setUsername(e.target.value)} />\r\n                  {' '}\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <div className=\"ui left icon input\">\r\n                <i className=\"lock icon\"></i>\r\n                <input name='password' type='password'\r\n                  value={password} required onChange={e => setPassword(e.target.value)} />\r\n                  {' '}\r\n              </div>\r\n            </div>\r\n            <button className=\"ui fluid large teal submit button\" type=\"submit\">Login</button>\r\n          </div>   \r\n        </form>\r\n        {errors === true &&\r\n          <div className=\"ui message error\">\r\n            <h3>Incorrect Credentials</h3>\r\n          </div>\r\n        }\r\n        <div className=\"ui message\">\r\n          New to us? <Link to=\"/Signup\"> Register  </Link> \r\n        </div>\r\n        </div>\r\n      </div>\r\n  )}\r\n  </>\r\n  );\r\n};\r\n    \r\nexport default Login;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}