{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dell/Desktop/2021/ReactJS/wordup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Dell/Desktop/2021/ReactJS/wordup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Dell/Desktop/2021/ReactJS/wordup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useState,useEffect,Fragment}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userEmail=_useState2[0],setUserEmail=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),userWords=_useState4[0],setUserWords=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAuth=_useState6[0],setIsAuth=_useState6[1];var _useState7=useState('true'),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];useEffect(function(){if(localStorage.getItem('token')!==null){fetch('https://ascentrick.pythonanywhere.com/api/words/',{method:'GET',headers:{'Content-Type':'application/json',Authorization:\"Token \".concat(localStorage.getItem('token'))}}).then(function(res){console.log('response code useEffect in Dash',res.status);if(res.status===200){res.json().then(function(data){setUserWords(data);setIsAuth(true);setLoading(false);});}else{if(res.status===401){setIsAuth(false);localStorage.clear();window.location.replace('/');}}});}},[]);var deleteWord=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://127.0.0.1:8000/api/words/\".concat(id),{method:'DELETE',headers:{'Content-type':'application/json','Authorization':\"Token \".concat(localStorage.getItem('token'))}});case 3:response=_context.sent;console.log('response code',response.status);window.location.replace('http://localhost:3000/');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function deleteWord(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"}),isAuth?/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",style:{padding:\"3em\",width:\"100%\",backgroundColor:'teal'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Saved Words\"}),/*#__PURE__*/_jsx(\"p\",{children:userWords.map(function(word){return/*#__PURE__*/_jsxs(\"span\",{className:\"saved-word\",children:[word.word[0].toUpperCase()+word.word.substring(1),\"  \\xA0\",/*#__PURE__*/_jsx(\"i\",{className:\"bordered link red minus inverted small icon\",onClick:deleteWord.bind(_this,word.id)}),\"\\xA0 \\xA0\"]},word.id);})})]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"})]})});};export default Dashboard;","map":{"version":3,"sources":["C:/Users/Dell/Desktop/2021/ReactJS/wordup/src/components/pages/Dashboard.js"],"names":["React","useState","useEffect","Fragment","Dashboard","userEmail","setUserEmail","userWords","setUserWords","isAuth","setIsAuth","loading","setLoading","localStorage","getItem","fetch","method","headers","Authorization","then","res","console","log","status","json","data","clear","window","location","replace","deleteWord","id","response","padding","width","backgroundColor","map","word","toUpperCase","substring","bind"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react'\r\n\r\nconst Dashboard = () => {\r\n  const [userEmail, setUserEmail] = useState('')\r\n  const [userWords, setUserWords] = useState({})\r\n  const [isAuth, setIsAuth] = useState(false)\r\n  const [loading, setLoading] =useState('true')\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token') !== null ) {\r\n      fetch('https://ascentrick.pythonanywhere.com/api/words/' , {\r\n          method : 'GET' ,\r\n          headers : {\r\n            'Content-Type' : 'application/json' ,\r\n            Authorization : `Token ${localStorage.getItem('token')}`\r\n          }\r\n      })\r\n    .then(res => {\r\n      console.log('response code useEffect in Dash', res.status)\r\n      if (res.status === 200 ) {\r\n        res.json()\r\n        .then(data => {\r\n          setUserWords(data)\r\n          setIsAuth(true)\r\n          setLoading(false)\r\n        }) \r\n      }      \r\n      else {\r\n        if (res.status === 401){\r\n          setIsAuth(false)\r\n          localStorage.clear();\r\n          window.location.replace('/')\r\n        }\r\n      }\r\n    })     \r\n  }\r\n\r\n  }, [])\r\n\r\n  const deleteWord = async(id) => {\r\n    try {\r\n      let response = await fetch(`http://127.0.0.1:8000/api/words/${id}` ,\r\n        { method : 'DELETE' ,\r\n          headers :  { \r\n            'Content-type': 'application/json' ,\r\n            'Authorization' : `Token ${localStorage.getItem('token')}`           \r\n            } \r\n        })\r\n        console.log('response code', response.status)\r\n        window.location.replace('http://localhost:3000/')\r\n      } \r\n        catch (error) { \r\n          console.log(error) \r\n        }   \r\n  }\r\n\r\n  return (\r\n    <div>\r\n        <div className=\"row \">\r\n        <div className=\"col-md-3\"></div>\r\n        { isAuth ?  ( \r\n          <div className=\"col-md-6\" style={{padding:\"3em\", width:\"100%\" , backgroundColor:'teal'}}> \r\n            <h3>Saved Words</h3>\r\n            <p> \r\n                {userWords.map(word => (\r\n                  <span key={word.id} className=\"saved-word\"> \r\n                      {word.word[0].toUpperCase() + word.word.substring(1)}  &nbsp;\r\n                      {<i className=\"bordered link red minus inverted small icon\" \r\n                          onClick={deleteWord.bind(this, word.id)}  /> }\r\n                      &nbsp; &nbsp;           \r\n                  </span>\r\n              ))}\r\n            </p>\r\n          </div>\r\n          ):\r\n          ( <> \r\n\r\n            </>)\r\n          }\r\n           <div className=\"col-md-3\"></div>\r\n        </div> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard\r\n\r\n"]},"metadata":{},"sourceType":"module"}